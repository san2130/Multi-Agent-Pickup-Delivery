<?xml version="1.0" encoding="UTF-8"?>

<launch>
    <arg name="rviz" default="false"/>
    <arg name="namesp" default="dot1"/>
    <group ns="dot4" >
        <node name="interpolator" pkg="tracking_pid" type="path_interpolator" output="screen">
            <param name="target_x_vel" value="0.8"/>
            <param name="target_x_acc" value="0.8"/>
            <param name="target_yaw_vel" value="0.8"/>
            <param name="target_yaw_acc" value="0.8"/>
            <remap from="/path" to="path"/>
            <param name="dotname" value="dot4"/>
        </node>
    </group>
    <group ns="dot2">
        <node name="interpolator" pkg="tracking_pid" type="path_interpolator" output="screen">
            <param name="target_x_vel" value="0.8"/>
            <param name="target_x_acc" value="0.8"/>
            <param name="target_yaw_vel" value="0.8"/>
            <param name="target_yaw_acc" value="0.8"/>
            <remap from="/path" to="path"/>
            <param name="dotname" value="dot2"/>
        </node>
    </group>
    <group ns="dot3">
        <node name="interpolator" pkg="tracking_pid" type="path_interpolator" output="screen">
            <param name="target_x_vel" value="0.8"/>
            <param name="target_x_acc" value="0.8"/>
            <param name="target_yaw_vel" value="0.8"/>
            <param name="target_yaw_acc" value="0.8"/>
            <remap from="/path" to="path"/>
            <param name="dotname" value="dot3"/>
        </node>
    </group>
    <!-- <group ns="dot1">
        <node name="interpolator" pkg="tracking_pid" type="path_interpolator" output="screen">
            <param name="target_x_vel" value="0.8"/>
            <param name="target_x_acc" value="0.8"/>
            <param name="target_yaw_vel" value="0.8"/>
            <param name="target_yaw_acc" value="0.8"/>
            <remap from="/path" to="path"/>
            <param name="dotname" value="dot1"/>
        </node>
    </group> -->
        <!-- PID controller -->
        <node name="controller" pkg="tracking_pid" type="controller"  output="screen">
        <remap from="move_base/cmd_vel" to="/dot/cmd_vel"/>
        <remap from="local_trajectory" to="trajectory"/>
        <param name="controller_debug_enabled" value="True"/>
        <param name="l" value="0.001"/>
        <param name="base_link_frame" value="origin_link" />
        <param name="track_base_link" value="True"/>
        <param name="loop_rate" value="20"/>
        <param name="Ki_long" value="0.3"/>
        <param name="Kp_long" value="3.0"/>
        <param name="Kd_long" value="0.2"/>
        <param name="Ki_lat" value="0.3"/>
        <param name="Kp_lat" value="3.0"/>
        <param name="Kd_lat" value="0.2"/>
        <!-- <remap from="/trajectory_finished" to="/dot/trajectory_finished"/> -->
        </node>
     
        <!-- Test path -->
        
        <node pkg="tf" type="static_transform_publisher" args=" 0 0 0 0 0 0 map path_frame 100" name="path_frame_tfpub"/>

        <!-- Rviz -->
        <node if="$(arg rviz)" name="$(anon rviz)" pkg="rviz" type="rviz" args="-d $(find tracking_pid)/test/tracking_pid/controller.rviz" />


        <!-- test script -->
        <test test-name="rostest_tracking_pid_node" pkg="tracking_pid" type="test_tracking_pid_system.py" />
    <!-- </group> -->
</launch>
